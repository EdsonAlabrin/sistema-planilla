<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
    <title th:text="${pageTitle} ?: 'Registrar Nuevo Empleado'"></title>
</head>
<body>
    <div layout:fragment="content">
        <div class="container mt-5 mb-5">
            <h2 class="text-center text-primary mb-4" th:text="${pageTitle}">Registrar Nuevo Empleado</h2>
            <hr class="mb-4">
             <div>
                <h2><i class="fas fa-user-circle icon"></i> Registrar nuevo Empleado</h2>
            </div>
            <form th:action="@{/empleados/guardar}" th:object="${empleado}" method="post" class="shadow-lg p-4 rounded-3 bg-white">
                
                <!-- Sección: Información Personal -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-header bg-light -white-text fw-bold fs-5">
                        <i class="fas fa-user me-2"></i> Información Personal
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="nombres" class="form-label">Nombres:</label>
                                <input type="text" id="nombres" th:field="*{nombres}" class="form-control" required>
                                <div th:if="${#fields.hasErrors('nombres')}" th:errors="*{nombres}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="apellidos" class="form-label">Apellidos:</label>
                                <input type="text" id="apellidos" th:field="*{apellidos}" class="form-control" required>
                                <div th:if="${#fields.hasErrors('apellidos')}" th:errors="*{apellidos}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="tipoDocumento" class="form-label">Tipo Documento:</label>
                                <select id="tipoDocumento" th:field="*{tipoDocumento}" class="form-select" required>
                                    <option value="">Seleccione...</option>
                                    <option value="DNI">DNI</option>
                                    <option value="Carnet de Extranjeria">Carnet de Extranjería</option>
                                </select>
                                <div th:if="${#fields.hasErrors('tipoDocumento')}" th:errors="*{tipoDocumento}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="numeroDocumento" class="form-label">Número Documento:</label>
                                <input type="text" id="numeroDocumento" th:field="*{numeroDocumento}" class="form-control" required>
                                <div th:if="${#fields.hasErrors('numeroDocumento')}" th:errors="*{numeroDocumento}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="fechaNacimiento" class="form-label">Fecha Nacimiento:</label>
                                <input type="date" id="fechaNacimiento" th:field="*{fechaNacimiento}" class="form-control" required>
                                <div th:if="${#fields.hasErrors('fechaNacimiento')}" th:errors="*{fechaNacimiento}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="sexo" class="form-label">Sexo:</label>
                                <select id="sexo" th:field="*{sexo}" class="form-select" required>
                                    <option value="">Seleccione...</option>
                                    <option value="M">Masculino</option>
                                    <option value="F">Femenino</option>
                                </select>
                                <div th:if="${#fields.hasErrors('sexo')}" th:errors="*{sexo}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="estadoCivil" class="form-label">Estado Civil:</label>
                                <select id="estadoCivil" th:field="*{estadoCivil}" class="form-select" required>
                                    <option value="">Seleccione...</option>
                                    <option value="Soltero(a)">Soltero(a)</option>
                                    <option value="Casado(a)">Casado(a)</option>
                                    <option value="Divorciado(a)">Divorciado(a)</option>
                                    <option value="Viudo(a)">Viudo(a)</option>
                                </select>
                                <div th:if="${#fields.hasErrors('estadoCivil')}" th:errors="*{estadoCivil}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="nacionalidad" class="form-label">Nacionalidad:</label>
                                <input type="text" id="nacionalidad" th:field="*{nacionalidad}" class="form-control" required>
                                <div th:if="${#fields.hasErrors('nacionalidad')}" th:errors="*{nacionalidad}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="correo" class="form-label">Correo Electrónico:</label>
                                <input type="email" id="correo" th:field="*{correo}" class="form-control">
                                <div th:if="${#fields.hasErrors('correo')}" th:errors="*{correo}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="numeroHijos" class="form-label">Número de Hijos:</label>
                                <input type="number" id="numeroHijos" th:field="*{numeroHijos}" class="form-control" min="0" value="0">
                                <div th:if="${#fields.hasErrors('numeroHijos')}" th:errors="*{numeroHijos}" class="text-danger"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Información de Contacto -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-header bg-light -white-text fw-bold fs-5">
                        <i class="fas fa-address-book me-2"></i> Información de Contacto
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-12">
                                <label for="direccionCompleta" class="form-label">Dirección Completa:</label>
                                <input type="text" id="direccionCompleta" th:field="*{direccionCompleta}" class="form-control" required>
                                <div th:if="${#fields.hasErrors('direccionCompleta')}" th:errors="*{direccionCompleta}" class="text-danger"></div>
                            </div>
                            <div class="col-md-4">
                                <label for="distrito" class="form-label">Distrito:</label>
                                <input type="text" id="distrito" th:field="*{distrito}" class="form-control" required>
                                <div th:if="${#fields.hasErrors('distrito')}" th:errors="*{distrito}" class="text-danger"></div>
                            </div>
                            <div class="col-md-4">
                                <label for="provincia" class="form-label">Provincia:</label>
                                <input type="text" id="provincia" th:field="*{provincia}" class="form-control" required>
                                <div th:if="${#fields.hasErrors('provincia')}" th:errors="*{provincia}" class="text-danger"></div>
                            </div>
                            <div class="col-md-4">
                                <label for="departamento" class="form-label">Departamento:</label>
                                <input type="text" id="departamento" th:field="*{departamento}" class="form-control" required>
                                <div th:if="${#fields.hasErrors('departamento')}" th:errors="*{departamento}" class="text-danger"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Información Laboral -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-header bg-light -white-text fw-bold fs-5">
                        <i class="fas fa-briefcase me-2"></i> Información Laboral
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="fechaIngreso" class="form-label">Fecha de Ingreso:</label>
                                <input type="date" id="fechaIngreso" th:field="*{fechaIngreso}" class="form-control" required>
                                <div th:if="${#fields.hasErrors('fechaIngreso')}" th:errors="*{fechaIngreso}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="puesto" class="form-label">Puesto:</label>
                                <select id="puesto" th:field="*{puesto.idPuesto}" class="form-select" required>
                                    <option value="">Seleccione un puesto</option>
                                    <option th:each="puesto : ${puestos}"
                                            th:value="${puesto.idPuesto}"
                                            th:text="${puesto.nombrePuesto}">
                                    </option>
                                </select>
                                <div th:if="${#fields.hasErrors('puesto.idPuesto')}" th:errors="*{puesto.idPuesto}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="regimenLaboral" class="form-label">Régimen Laboral:</label>
                                <select id="regimenLaboral" th:field="*{regimenLaboral}" class="form-select" required>
                                    <option value="">Seleccione...</option>
                                    <option value="Régimen General">Régimen General</option>
                                    <option value="Régimen MYPE Tributario">Régimen MYPE Tributario</option>
                                    <option value="Régimen Agrario">Régimen Agrario</option>
                                    <option value="Régimen de Construcción Civil">Régimen de Construcción Civil</option>
                                </select>
                                <div th:if="${#fields.hasErrors('regimenLaboral')}" th:errors="*{regimenLaboral}" class="text-danger"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Información de Pensiones -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-header bg-light -white-text fw-bold fs-5">
                        <i class="fas fa-money-check-alt me-2"></i> Información de Pensiones
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="sistemaPensiones" class="form-label">Sistema de Pensiones:</label>
                                <select id="sistemaPensiones" th:field="*{sistemaPensiones}" class="form-select">
                                    <option value="">Seleccione...</option>
                                    <option value="ONP">ONP</option>
                                    <option value="AFP">AFP</option>
                                </select>
                                <div th:if="${#fields.hasErrors('sistemaPensiones')}" th:errors="*{sistemaPensiones}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="codigoPension" class="form-label">Código de Pensión (ONP/AFP):</label>
                                <input type="text" id="codigoPension" th:field="*{codigoPension}" class="form-control">
                                <div th:if="${#fields.hasErrors('codigoPension')}" th:errors="*{codigoPension}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="nombreAfp" class="form-label">Nombre AFP (si aplica):</label>
                                <input type="text" id="nombreAfp" th:field="*{nombreAfp}" class="form-control">
                                <div th:if="${#fields.hasErrors('nombreAfp')}" th:errors="*{nombreAfp}" class="text-danger"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Información Bancaria -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-header bg-light -white-text fw-bold fs-5">
                        <i class="fas fa-bank me-2"></i> Información Bancaria
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="banco" class="form-label">Banco:</label>
                                <select id="banco" th:field="*{banco.idBanco}" class="form-select">
                                    <option value="">Seleccione un banco (Opcional)</option>
                                    <option th:each="banco : ${bancos}"
                                            th:value="${banco.idBanco}"
                                            th:text="${banco.nombreBanco}">
                                    </option>
                                </select>
                                <div th:if="${#fields.hasErrors('banco.idBanco')}" th:errors="*{banco.idBanco}" class="text-danger"></div>
                            </div>
                            <div class="col-md-6">
                                <label for="numeroCuentaBanco" class="form-label">Número de Cuenta Bancaria:</label>
                                <input type="text" id="numeroCuentaBanco" th:field="*{numeroCuentaBanco}" class="form-control">
                                <div th:if="${#fields.hasErrors('numeroCuentaBanco')}" th:errors="*{numeroCuentaBanco}" class="text-danger"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botones de Acción -->
                <div class="mt-4 text-center">
                    <button type="submit" class="btn btn-success btn-lg me-3 shadow-sm">
                        <i class="fas fa-save me-2"></i> Guardar Empleado
                    </button>
                    <a th:href="@{/empleados/listar}" class="btn btn-secondary btn-lg shadow-sm">
                        <i class="fas fa-arrow-left me-2"></i> Cancelar y Volver
                    </a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>
